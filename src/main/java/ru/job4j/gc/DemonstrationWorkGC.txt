
1- руками рассчитать сколько будет занимать памяти объект User user = new User(30,"Alexander");

 Заголовок: 16 байт
- Поле int age = 4 байта
- Поле String name:
  - Заголовок 16 байта
  - три поля int 12 байта
  - ссылка на массив char[] 4 байта
  - Выравнивание для кратности 8 = 0
   итого 32 байта
  -- массив char[]:
  -- Заголовок 16 байт
  -- элементы char 2 байта * количество символов (Alexander) 9шт = 18 байт
  -- Выравнивание для кратности 8 = 0
    итого 34 байта
- итого на строку 32 + 34 = 66 байт

ИТОГО под объект user выделяется = 86 байт памяти

2 - расчет памяти занимаемой данным объектом (без полей) User user = new User():
- Заголовок - 16 байт
ИТОГО под пустой(без полей) объект user будет выделено = 16 байт памяти


Объяснить поведение программы:

 * Вариант 1 - сборщик мусора не сработал.
- параметры -Xmx4m -Xms4m
- создаём в цикле 2000 объектов
- убран метод System.gc()
программа выполняется:
=== Environment state ===
Free: 2
Total: 4
Max: 4

 * Вариант 2 - сборщик мусора сработал.
- параметры -Xmx4m -Xms4m
- создаём в цикле 6000 объектов
- добавлен метод System.gc()
программа выполняется:
=== Environment state ===
Removed 1999 N 1999
Removed 1998 N 1998
Free: 2
Total: 4
Max: 4
Removed 1997 N 1997
Removed 1996 N 1996
Removed 1995 N 1995
Removed 1994 N 1994



